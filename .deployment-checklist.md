# Deployment Checklist

Use this checklist before deploying to production.

## Pre-Deployment

### Local Machine
- [ ] All code committed and pushed to GitHub
- [ ] Tests passing (`npm test`)
- [ ] Build succeeds (`npm run build`)
- [ ] `.env.example` is up to date with all required variables
- [ ] Review `setup-droplet.sh` for any custom modifications needed

### DigitalOcean Account
- [ ] DigitalOcean account created and verified
- [ ] Payment method added
- [ ] SSH key uploaded to DigitalOcean

### Domain (Optional)
- [ ] Domain purchased and DNS accessible
- [ ] Ready to point A record to Droplet IP

## Deployment Steps

### 1. Create Droplet
- [ ] Created Ubuntu 22.04 Droplet (minimum $6/month tier)
- [ ] Selected appropriate datacenter region
- [ ] Selected SSH key for authentication
- [ ] Noted Droplet IP address: `___________________`

### 2. Initial Setup
- [ ] Successfully SSH'd into Droplet (`ssh root@YOUR_IP`)
- [ ] Cloned repository to Droplet
- [ ] Ran `./setup-droplet.sh` successfully
- [ ] Verified app is running (`pm2 status`)

### 3. Configuration
- [ ] Updated SESSION_SECRET in `/var/www/prompt-studio/.env`
- [ ] Verified DATABASE_URL in `.env`
- [ ] Updated nginx server_name (if using domain)

### 4. DNS & SSL (If using domain)
- [ ] Pointed domain A record to Droplet IP
- [ ] Waited for DNS propagation (check with `dig your-domain.com`)
- [ ] Installed SSL certificate with certbot
- [ ] Verified HTTPS is working

## Post-Deployment Verification

### Application Tests
- [ ] Homepage loads at `http://YOUR_IP` or `https://your-domain.com`
- [ ] Can register a new account
- [ ] Can log in successfully
- [ ] Can create and save prompts
- [ ] Can view prompt library
- [ ] Premium upgrade works (test endpoint)
- [ ] Can export prompts (premium feature)

### Technical Checks
- [ ] PM2 shows app running: `pm2 status`
- [ ] No errors in logs: `pm2 logs prompt-studio --lines 50`
- [ ] nginx is running: `systemctl status nginx`
- [ ] Firewall configured: `ufw status`
- [ ] Database file exists: `ls -la /var/www/prompt-studio/prisma/data/`

### Performance & Security
- [ ] Response times acceptable (< 2 seconds)
- [ ] HTTPS working (if domain configured)
- [ ] Security headers present (check browser dev tools)
- [ ] Rate limiting working on auth endpoints
- [ ] Session cookies are secure and HTTP-only

## Ongoing Maintenance

### Regular Tasks
- [ ] Set up database backup cron job
- [ ] Monitor application logs weekly
- [ ] Update system packages monthly: `apt update && apt upgrade`
- [ ] Review PM2 logs for errors
- [ ] Test backup restoration procedure

### Deployment Updates
- [ ] Document deployment process for team
- [ ] Test `deploy.sh` script works for updates
- [ ] Set up monitoring/alerting (optional)
- [ ] Consider setting up staging environment

## Rollback Plan

If something goes wrong:

1. Check logs immediately:
   ```bash
   pm2 logs prompt-studio
   tail -f /var/log/nginx/error.log
   ```

2. Revert to previous version:
   ```bash
   cd /var/www/prompt-studio
   git log --oneline -5  # Find previous commit
   git checkout PREVIOUS_COMMIT_HASH
   ./deploy.sh
   ```

3. Restore database from backup:
   ```bash
   cp /root/backups/prod-YYYYMMDD.db /var/www/prompt-studio/prisma/data/prod.db
   pm2 restart prompt-studio
   ```

## Emergency Contacts

- DigitalOcean Support: https://cloud.digitalocean.com/support
- Your Email: _______________________
- Domain Registrar: _______________________

## Notes

Add any deployment-specific notes here:
- 
- 
- 
