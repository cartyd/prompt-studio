<% const title = 'My Prompts'; %>
<% const { USER_CONSTANTS } = require('../../constants'); %>
<% const { PromptListHelpers } = require('../../utils/template-data-helpers'); %>
<% const processedPrompts = PromptListHelpers.processPromptsForDisplay(prompts, subscription); %>
<%- include('../layout-wrapper', { body: `
<link rel="stylesheet" href="/css/prompts.css">

<div class="prompts-header">
  <h2>My Prompts</h2>
  <a href="/frameworks" class="btn">Create New Prompt</a>
</div>

${(!subscription || !subscription.isPremium) && prompts.length >= ${USER_CONSTANTS.FREE_TIER_PROMPT_LIMIT} ? `
  <div class="error">
    You've reached your free tier limit of ${USER_CONSTANTS.FREE_TIER_PROMPT_LIMIT} prompts. <a href="/premium">Upgrade to Premium</a> for unlimited prompts.
  </div>
` : ''}

${prompts.length === 0 ? `
  <div class="empty-state">
    <p>You haven't saved any prompts yet.</p>
    <a href="/frameworks" class="btn">Create Your First Prompt</a>
  </div>
` : `
  <div class="grid grid-cols-1 grid-gap-md">
    ${processedPrompts.map(p => PromptListHelpers.renderPromptRow(p)).join('')}
  </div>
`}
`, user, subscription }) %>
