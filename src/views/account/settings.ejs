<% const title = 'Account Settings'; %>
<%- include('../layout-wrapper', { body: `
<div class="max-w-900 mx-auto">
  <h2 class="mb-2">Account Settings</h2>

  <!-- Account Information -->
  <div class="card-light p-lg mb-md">
    <h3 class="m-0 mb-md heading-sm">Account Information</h3>
    <div class="grid-settings">
      <div class="label-muted">Email:</div>
      <div><strong>${user.email}</strong></div>
      
      <div class="label-muted">Name:</div>
      <div>${user.name}</div>
      
      <div class="label-muted">Member Since:</div>
      <div><span data-format-date="${user.createdAt}" data-format="long-date">${user.createdAt}</span></div>
      
      <div class="label-muted">Last Password Change:</div>
      <div><span data-format-date="${user.lastPasswordChange}" data-format="long-date">${user.lastPasswordChange}</span></div>
    </div>
  </div>

  <!-- Change Password Section -->
  <div class="card-white p-xl mb-md">
    <h3 class="m-0 mb-md heading-sm">Change Password</h3>
    <p class="mb-lg text-muted-sm">
      Choose a strong password that you don't use for other accounts. Your password must be at least 8 characters long.
    </p>

    ${passwordSuccess ? `<div class="success mb-1-5">${passwordSuccess}</div>` : ''}
    ${passwordError ? `<div class="error mb-1-5">${passwordError}</div>` : ''}

    <form method="POST" action="/account/change-password">
      <input type="hidden" name="_csrf" value="${csrfToken}">
      
      <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <input type="password" id="currentPassword" name="currentPassword" required>
      </div>

      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input type="password" id="newPassword" name="newPassword" required minlength="8">
        <small class="text-muted text-sm">
          Must be at least 8 characters long
        </small>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <input type="password" id="confirmPassword" name="confirmPassword" required minlength="8">
      </div>

      <button type="submit" class="btn">Change Password</button>
    </form>
  </div>

  <!-- Security Notice -->
  <div class="card-warning mb-xxl">
    <p class="m-0 text-sm text-warning">
      <strong>ðŸ”’ Security Tip:</strong> After changing your password, you'll receive a confirmation email. 
      If you didn't make this change, please contact support immediately.
    </p>
  </div>

  <!-- Email Change Coming Soon -->
  <div class="card-white p-xxl">
    <h3 class="m-0 mb-md heading-sm text-secondary">Change Email Address</h3>
    <p class="text-muted m-0 text-muted-sm">
      Email change functionality is coming soon. For now, please contact support if you need to change your email address.
    </p>
  </div>
</div>
`, user }) %>
