<% const title = 'Forgot Password'; %>
<%
let bodyContent = '';

// Build success state
if (typeof success !== 'undefined' && success) {
  bodyContent = `
<div class="auth-container">
  <h2 class="auth-title">Forgot Password</h2>
  
  <div class="success">${success}</div>
  
  <div class="my-1 text-muted">If an account exists with that email, we've sent instructions. Please check your inbox and spam folder.</div>
  <div class="flex gap-sm mt-1">
    <a href="/auth/login" class="btn w-full">Back to Login</a>
  </div>
</div>
`;
} else {
  // Build form state
  bodyContent = `
<div class="auth-container">
  <h2 class="auth-title">Forgot Password</h2>
  
  ${typeof error !== 'undefined' && error ? `<div class="error">${error}</div>` : ''}
  
  <p class="mb-1-5 text-muted">
    Enter your email address and we'll send you instructions to reset your password.
  </p>

  <form method="POST" action="/auth/forgot-password">
    <input type="hidden" name="_csrf" value="${csrfToken}">
    
    <div class="form-group">
      <label for="email">Email Address</label>
      <input type="email" id="email" name="email" required autofocus>
    </div>

    <button type="submit" class="btn w-full">Send Reset Instructions</button>
  </form>

  <p class="auth-footer-text mt-lg">
    <a href="/auth/login">Back to Login</a>
  </p>
</div>
`;
}
%>
<%- include('../layout-wrapper', { body: bodyContent, user }) %>
