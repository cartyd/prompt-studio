<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="<%= typeof description !== 'undefined' ? description : 'Create structured, effective prompts using proven LLM prompting frameworks including Tree-of-Thought, Chain-of-Thought, and more.' %>">
  <meta name="keywords" content="LLM prompts, AI prompting, prompt engineering, Chain-of-Thought, Tree-of-Thought, prompt frameworks, AI automation">
  <meta name="author" content="Dave Carty">
  <link rel="canonical" href="<%= typeof canonicalUrl !== 'undefined' ? canonicalUrl : 'https://simplicate.ai' %>">
  
  <!-- Open Graph Tags -->
  <meta property="og:title" content="<%= typeof title !== 'undefined' ? title + ' - ' : '' %>Prompt Framework Studio">
  <meta property="og:description" content="<%= typeof description !== 'undefined' ? description : 'Create structured LLM prompts with proven frameworks by Simplicate AI' %>">
  <meta property="og:type" content="website">
  <meta property="og:url" content="<%= typeof canonicalUrl !== 'undefined' ? canonicalUrl : 'https://simplicate.ai' %>">
  <meta property="og:site_name" content="Simplicate AI">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Prompt Framework Studio">
  <meta name="twitter:description" content="Create structured LLM prompts with proven frameworks">
  
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  
  <!-- Boxicons -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- Main CSS - Modular stylesheets -->
  <link rel="stylesheet" href="/css/main.css">
  
  <!-- Component Utilities -->
  <link rel="stylesheet" href="/css/components.css">
  
  <!-- Page-specific styles -->
  <% if (typeof additionalStyles !== 'undefined' && additionalStyles) { %>
    <%- additionalStyles %>
  <% } %>
  
  <title><%= typeof title !== 'undefined' ? title : '' %>Prompt Framework Studio</title>
  <script src="https://unpkg.com/htmx.org@1.9.10"></script> 

</head>
<body>
  <%
    // Helper variables to reduce repeated logic
    const isAuthenticated = typeof user !== 'undefined' && user;
    const isPremiumUser = isAuthenticated && subscription && subscription.isPremium;
    const showPremiumUpgrade = isAuthenticated && !isPremiumUser;
    const userInitial = isAuthenticated ? user.name.charAt(0).toUpperCase() : '';
  %>
  
  <header>
    <div class="container">
      <nav class="nav-header">
        
        <!-- LEFT: Logo -->
        <div class="nav-left">
          <a href="/">
            <img src="/simplicate.png" class="logo" alt="Simplicate AI Logo">
          </a>
        </div>

        <!-- CENTER: Title & Tagline -->
        <div class="nav-center">
          <h1><a href="/">Prompt Framework Studio</a></h1>
          <p class="tagline"><em>Nothing But Prompt</em></p>
        </div>

        <!-- RIGHT: Premium Button + Avatar / Login -->
        <div class="nav-right">
          <% if (isAuthenticated) { %>
            <!-- Premium Button (if not premium) -->
            <% if (showPremiumUpgrade) { %>
              <a href="/premium" class="btn-premium">Upgrade to Premium</a>
            <% } %>

            <!-- Avatar with Dropdown -->
            <button class="avatar-wrapper" 
                    id="avatar-wrapper" 
                    type="button"
                    aria-label="User menu"
                    aria-haspopup="true"
                    aria-expanded="false">
              <div class="avatar"><%= userInitial %></div>
            </button>
              
            <!-- Dropdown Menu -->
            <div class="dropdown-menu" id="dropdown-menu" role="menu" hidden>
                <div class="dropdown-title">
                  <%= user.name %>
                  <% if (isPremiumUser) { %>
                    <span class="badge badge-premium ml-sm">Premium</span>
                  <% } %>
                </div>
                <hr>
                <% if (user.isAdmin) { %>
                  <a href="/admin/dashboard" role="menuitem"><strong>Admin Dashboard</strong></a>
                  <a href="/admin/users" role="menuitem">Manage Users</a>
                  <a href="/admin/analytics" role="menuitem">Analytics</a>
                  <hr>
                <% } %>
                <a href="/frameworks" role="menuitem">Frameworks</a>
                <a href="/prompts" role="menuitem">My Prompts</a>
                <% if (showPremiumUpgrade) { %>
                  <a href="/premium" role="menuitem">Upgrade to Premium</a>
                <% } %>
                <hr>
                <a href="/account/settings" role="menuitem">Account Settings</a>
                <a href="/about" role="menuitem">About</a>
                <hr>
                <form action="/auth/logout" method="POST">
                  <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                  <button type="submit" class="logout" role="menuitem">Logout</button>
                </form>
            </div>
          <% } else { %>
            <!-- Login/Register for non-authenticated users -->
            <a href="/auth/login" class="btn btn-sm">Login</a>
            <a href="/auth/register" class="btn btn-sm">Register</a>
          <% } %>
        </div>

      </nav>
    </div>
  </header>

  <main class="container">
    <%- body %>
  </main>

  <footer>
    <div class="container">
      <p>
        &copy; 2026 Prompt Framework Studio by <a href="https://simplicate.ai">Simplicate AI</a>. Created by Dave Carty.
        <br>
        <a href="/legal/privacy">Privacy Policy</a> | <a href="/legal/terms">Terms of Service</a>
      </p>
    </div>
  </footer>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Prompt Framework Studio",
    "description": "Create structured, effective prompts using proven LLM prompting frameworks",
    "url": "https://simplicate.ai",
    "author": {
      "@type": "Person",
      "name": "Dave Carty"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Simplicate AI",
      "url": "https://simplicate.ai"
    },
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>

  <!-- Date Formatter Utility -->
  <script src="/js/date-formatter.js"></script>

  <% if (isAuthenticated) { %>
  <!-- User Dropdown Menu Script -->
  <script src="/js/user-dropdown.js"></script>
  <% } %>
</body>
</html>
