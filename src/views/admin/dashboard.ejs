<% const title = 'Admin Dashboard'; %>
<%- include('../layout-wrapper', { body: `
<style>
  .admin-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .stat-card {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  
  .stat-card h3 {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
  }
  
  .stat-card .value {
    font-size: 2rem;
    font-weight: bold;
    color: #333;
  }
  
  .stat-card .subtext {
    font-size: 0.85rem;
    color: #999;
    margin-top: 0.5rem;
  }
  
  .admin-section {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    margin-bottom: 1.5rem;
  }
  
  .admin-section h2 {
    margin-bottom: 1rem;
    font-size: 1.25rem;
  }
  
  .data-table {
    width: 100%;
    border-collapse: collapse;
  }
  
  .data-table th {
    text-align: left;
    padding: 0.75rem;
    background: #f5f5f5;
    font-weight: 600;
    border-bottom: 2px solid #e0e0e0;
  }
  
  .data-table td {
    padding: 0.75rem;
    border-bottom: 1px solid #e0e0e0;
  }
  
  .data-table tr:hover {
    background: #fafafa;
  }
  
  .quick-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
  }
</style>

<div class="admin-header">
  <h1>Admin Dashboard</h1>
  <div class="quick-actions">
    <a href="/admin/users" class="btn">Manage Users</a>
    <a href="/admin/analytics" class="btn btn-secondary">View Analytics</a>
  </div>
</div>

<!-- Stats Grid -->
<div class="stats-grid">
  <div class="stat-card">
    <h3>Total Users</h3>
    <div class="value">${stats.totalUsers}</div>
    <div class="subtext">${stats.freeUsers} free, ${stats.premiumUsers} premium</div>
  </div>
  
  <div class="stat-card">
    <h3>Total Prompts</h3>
    <div class="value">${stats.totalPrompts}</div>
  </div>
  
  <div class="stat-card">
    <h3>Total Events</h3>
    <div class="value">${stats.totalEvents}</div>
    <div class="subtext">${stats.recentEvents} in last 24h</div>
  </div>
</div>

<!-- Device Stats -->
<div class="admin-section">
  <h2>Device Distribution</h2>
  <table class="data-table">
    <thead>
      <tr>
        <th>Device Type</th>
        <th>Count</th>
      </tr>
    </thead>
    <tbody>
      ${deviceStats.map(stat => `
        <tr>
          <td>${stat.deviceType || 'Unknown'}</td>
          <td>${stat._count}</td>
        </tr>
      `).join('')}
    </tbody>
  </table>
</div>

<!-- Country Stats -->
<div class="admin-section">
  <h2>Top Countries</h2>
  <table class="data-table">
    <thead>
      <tr>
        <th>Country</th>
        <th>Events</th>
      </tr>
    </thead>
    <tbody>
      ${countryStats.map(stat => `
        <tr>
          <td>${stat.country || 'Unknown'}</td>
          <td>${stat._count}</td>
        </tr>
      `).join('')}
    </tbody>
  </table>
</div>
`, user, subscription }) %>
